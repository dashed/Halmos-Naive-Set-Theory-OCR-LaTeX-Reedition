sense be undone; the next thing we shall see is that what two functions do can sometimes be done in one step. If, to be explicit, $f$ is a function from $X$ to $Y$ and $g$ is a function from $Y$ to $Z$, then every element in the range of $f$ belongs to the domain of $g$, and, consequently, $g(f(x))$ makes sense for each $x$ in $X$. The function $h$ from $X$ to $Z$, defined by $h(x) = g(f(x))$ is called the \textit{composite} of the functions $f$ and $g$; it is denoted by $g \circ f$ or, more simply, by $gf$. (Since we shall not have occasion to consider any other kind of multiplication for functions, in this book we shall use the latter, simpler notation only.) 

Observe that the order of events is important in the theory of functional composition. In order that $gf$ be defined, the range of $f$ must be included in the domain of $g$, and this can happen without it necessarily happening in the other direction at the same time. Even if both $fg$ and $gf$ are defined, which happens if, for instance, $f$ maps $X$ into $Y$ and $g$ maps $Y$ into $X$, the functions $fg$ and $gf$ need not be the same; in other words, functional composition is not necessarily commutative. 

Functional composition may not be commutative, but it is always associative. If $f$ maps $X$ into $Y$, if $g$ maps $Y$ into $Z$, and if $h$ maps $Z$ into $U$, then we can form the composite of $h$ with $gf$ and the composite of $hg$ with $f$;it is a simple exercise to show that the result is the same in either case. 

The connection between inversion and composition is important; something like it crops up all over mathematics. If $f$ maps $X$ into $Y$ and $g$ maps $Y$ into $Z$, then f^{-1} maps $\mathcal{P}(Y)$ into $\mathcal{P}(X)$ and $g^{-1}$ maps $\mathcal{P}(Z)$ into $\mathcal{P}(Y)$. In this situation, the composites that are formable are $gf$ and $f^{-1}g^{-1}$; the assertion is that the latter is the inverse of the former. Proof: if $x \in (gf)^{-1}(C)$, where $x \in X$ and $C \subset Z$, then $g(f(x)) \in C$, so that $f(x) \in g^{-1}(C)$, and therefore $x \in f^{-1}(g^{-1}(C))$; the steps of the argument are reversible. 

Inversion and composition for functions are special cases of similar operations for relations. Thus, in particuler, associated with every relation $R$ from $X$ to $Y$ there is the \textit{inverse} (or \textit{converse}) relation $R^{-l}$ from $Y$ to $X$; by definition $y R^{-1} x$ means that $xRy$. Example: if $R$ is the relation of belonging, from $X$ to $\mathcal{P}(X)$, then $R^{-1}$ is the relation of containing, from $\mathcal{P}(X)$ to $X$. It is an immediate consequence of the definitions involved that $\text{dom }R^{-1} = \text{ran} R$ and $\text{ran}R^{-1} = \text{dom} R$. If the relation $R$ is a function, then the equivalent assertions $xRy$ and $yR^{-1}x$ can be written in the equivalent forms $R(x) = y$ and $x \in R^{-1}( \{ y \} ). 

Because of difficulties with commutativity, the generalization of functional composition has to be handled with care. The composite of the relations $R$ and $S$ is defined in case $R$ is a relation from $X$ to $Y$ and $S$ is a relation